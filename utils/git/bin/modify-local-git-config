#!/bin/sh

# Modify the *local* git config (i.e. .git/config) to set both push.rebase and
# rebase.autostash to true provided they are not set to true already

if [ ! $(git config --local pull.rebase) ]; then
  git config --local pull.rebase true
fi

if [ ! $(git config --local rebase.autostash) ]; then
  git config --local rebase.autostash true
fi

# This is necessary for Git version 1.9.1 (and possibly older) because
# while the config option rebase.autostash exists, it is apparently not
# honored by "git pull"
if [ ! "$(git config --local alias.up)" ]; then
  git config --local alias.up '!git fetch && git rebase'
fi
